<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Happy Birthday, Shivu! üéÇ</title>
  <meta name="description" content="A tiny website from Ishan to Shivu ‚Äî happy birthday!">

  <!-- GOOGLE FONTS (fixed: proper https:// links + preconnect) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Sacramento&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #fff3f2;        /* scarlet red */
      --card: rgba(255,255,255,0.9);
      --accent: #d72638;    /* soft rose for headings */
      --accent-2: #e7b868;  /* gold accent */
      --text: #2d1c1c;      /* deep brown text */
      --muted: rgba(45,28,28,0.8);
      --balloon-shadow: rgba(0,0,0,0.12);
    }

    /* Reset + base */
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Poppins, system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 80% -10%, #f0b5af 0%, transparent 60%),
        radial-gradient(1000px 500px at -10% 10%, #f7d5d2 10%, transparent 60%),
        var(--bg);
      overflow-x:hidden;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    a{color:var(--accent)}

    /* Layout */
    .container{width:min(1100px,95%);margin:0 auto}
    .center{display:flex;align-items:center;justify-content:center}

    header{
      min-height:92vh;
      position:relative;
      padding:80px 0 40px;
      text-align:center;
      overflow:hidden;
    }
    header h1{
      font-family: Sacramento, cursive;
      font-size: clamp(52px, 8vw, 110px);
      line-height:1.05;
      margin:0 0 10px;
      color:var(--accent);
      text-shadow:0 6px 18px rgba(215,38,56,.3);
    }
    header p.tag{
      margin:0 auto 28px;
      color:var(--muted);
      font-weight:400;
      letter-spacing:.5px;
      max-width:720px;
    }

    /* Floating balloons */
    .balloon{position:absolute; bottom:-140px; width:70px; height:90px; border-radius:48% 48% 48% 48% / 60% 60% 40% 40%;
      box-shadow: inset -8px -10px 20px rgba(0,0,0,.1), 0 12px 30px rgba(0,0,0,.15);
      animation: floatUp linear infinite;
      pointer-events:none; /* decorative */
    }
    .balloon:after{content:""; position:absolute; left:50%; top:88px; width:2px; height:120px; background:rgba(0,0,0,.15); transform:translateX(-50%);}    
    @keyframes floatUp{to{transform:translateY(-120vh) translateX(var(--drift))}}

    /* Respect user motion preferences */
    @media (prefers-reduced-motion: reduce){
      .balloon{animation: none}
      .type .cursor{animation:none}
    }

    .cta{
      display:inline-flex; gap:10px; align-items:center; justify-content:center;
      padding:14px 20px; border-radius:16px; border:1px solid rgba(0,0,0,.08);
      background:linear-gradient(180deg, rgba(255,255,255,.9), rgba(255,255,255,.75));
      backdrop-filter: blur(6px);
      color:var(--text); text-decoration:none; font-weight:600; cursor:pointer;
      transition: transform .15s ease, box-shadow .2s ease;
      box-shadow: 0 6px 20px rgba(0,0,0,.18);
    }
    .cta:hover{transform:translateY(-2px); box-shadow:0 10px 28px rgba(0,0,0,.28)}

    /* Sections */
    section{padding:70px 0}
    .card{background:var(--card);
      border:1px solid rgba(0,0,0,.06); border-radius:24px; padding:28px; box-shadow:0 6px 22px rgba(0,0,0,.12)}

    .type{font-size:clamp(18px,2.5vw,22px); line-height:1.75; min-height:160px}
    .type .cursor{display:inline-block; width:2px; background:var(--accent-2); animation:blink 1s steps(1) infinite; margin-left:6px; height:1em; vertical-align:-2px}
    @keyframes blink{50%{opacity:0}}

    .grid{display:grid; gap:22px}
    @media (min-width:840px){.grid-2{grid-template-columns:1.1fr .9fr}}

    .stars{display:flex; flex-wrap:wrap; gap:12px}
    .star{padding:10px 14px; border-radius:999px; border:1px solid rgba(0,0,0,.08); font-size:14px; color:var(--text); background:rgba(255,255,255,.75); cursor:pointer}
    .star.revealed{background:linear-gradient(90deg, rgba(215,38,56,.12), rgba(231,184,104,.12)); border-color:rgba(0,0,0,.12)}

    footer{padding:40px 0 70px; text-align:center; color:var(--muted); font-size:13px}

    /* Confetti canvas */
    canvas#confetti{position:fixed; inset:0; pointer-events:none; z-index:40}

    /* Audio button */
    .audio-btn{position:fixed; bottom:20px; right:20px; z-index:50}
    .muted{opacity:.75}

    /* Vertical gallery styling */
    .v-gallery{display:flex;flex-direction:column;gap:40px;margin-top:16px}
    .v-item{display:flex;flex-direction:column;gap:16px;align-items:center;text-align:center}

    /* FIXED IMAGE SIZE + fade-in */
    .v-img{max-width:400px; width:100%; border-radius:16px; box-shadow:0 6px 22px rgba(0,0,0,.18); margin:0 auto; display:block; opacity:0; transform:translateY(10px); transition:opacity .55s ease, transform .55s ease}
    .v-img.loaded{opacity:1; transform:none}

    /* BIGGER, CLEARER TEXT */
    .v-text{font-size:18px; line-height:1.8; color:var(--text); text-align:justify; max-width:700px; margin:0 auto}

    /* Small helpers */
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <canvas id="confetti" aria-hidden="true"></canvas>
  <header>
    <div class="container">
      <h1>Happy Birthday, Shivu ‚ú®</h1>
      <p class="tag">From Ishan ‚Äî a small corner of the internet just for you. May this year be softer, brighter, and kinder to your heart. üíñ</p>

      <!-- Action buttons with ARIA labels -->
      <div style="display:inline-flex; gap:12px; align-items:center; justify-content:center;">
        <button id="revealBtn" class="cta" aria-label="Open the birthday letter">Open Your Birthday Letter</button>
        <button id="musicBtn" class="cta audio-btn muted" aria-pressed="false" aria-label="Play or pause music">Play Music ‚ô™</button>
      </div>
    </div>
  </header>

  <section>
    <div class="container grid grid-2">
      <div class="card">
        <div class="type" id="typeArea" aria-live="polite"></div>
      </div>

      <div class="card">
        <h3 style="margin-top:0">Tiny Things I Love About You</h3>
        <div class="stars" id="stars" role="list">
          <button class="star" role="button">your ‚Äúhanji‚Äù voice</button>
          <button class="star" role="button">the way you listen</button>
          <button class="star" role="button">your quick little anger</button>
          <button class="star" role="button">how you make me feel chosen</button>
          <button class="star" role="button">your cute texts</button>
          <button class="star" role="button">the clingy side (my favorite)</button>
          <button class="star" role="button">the smile I hear even on calls</button>
          <button class="star" role="button">your courage on hard days</button>
        </div>
        <p style="margin-top:16px; color:#aeb8ff; font-size:13px">Tap each bubble ‚ú®</p>
      </div>
    </div>
  </section>

  <section>
    <div class="container">
      <div class="card center" style="flex-direction:column; text-align:center">
        <h2 style="margin:0 0 10px">Here‚Äôs to your year, Shivu ü•Ç</h2>
        <p style="max-width:720px; color:var(--muted)">I don‚Äôt know everything the future holds, but I know this: you‚Äôre stronger than you think, softer than you let on, and more loved than you believe. Keep choosing yourself. I‚Äôm cheering for you ‚Äî always. ‚Äî Ishan</p>
        <div style="height:16px"></div>
        <button id="confettiBtn" class="cta" aria-label="Celebrate with confetti">‚ú® Celebrate</button>
      </div>
    </div>
  </section>

  <section>
    <div class="container">
      <div class="card">
        <h3 style="margin:0 0 12px">A little gallery of you üíñ</h3>
        <div class="v-gallery">
          <div class="v-item">
            <img src="shivu1.jpg" alt="Baby Shivu smiling" class="v-img" loading="lazy">
            <p class="v-text">>Even as a baby, you were already busy stealing hearts without even knowing it. Those tiny eyes already had the same mischief I see in you today, and that little face could melt anyone in seconds. Honestly, who allowed you to be this cute from the very beginning? You look like the kind of baby strangers would stop just to admire and adore. And somehow, you only grew up to become even more breathtaking. If time travel was real, I‚Äôd go back just to pinch those cheeks once‚Äîmaybe even steal you away so you‚Äôd grow up only with me. It‚Äôs kind of unfair how you went from angel baby to angel grown-up without skipping a beat. You‚Äôre living proof that cuteness doesn‚Äôt fade, it just evolves into beauty. Whether baby Shivu or now Shivu, you‚Äôve always been, and will always be, my favorite view.üçº</p>
          </div>
          <div class="v-item">
            <img src="shivu2.jpg" alt="Shivu sticking tongue out" class="v-img" loading="lazy">
            <p class="v-text">This picture is pure chaos and pure perfection, and honestly, it makes me laugh every single time. You stick your tongue out like you‚Äôre trying to be silly, but it somehow just makes you even cuter. It‚Äôs not fair how you can look so effortlessly adorable even when you‚Äôre messing around. That little playful side of yours is one of the million reasons I‚Äôm obsessed with you. You look like trouble in the best possible way, the kind of trouble I‚Äôd sign up for again and again. It‚Äôs cheeky, it‚Äôs flirty, and it‚Äôs so you‚Äîmaking even goofy moments look like art. If charm had a face, it‚Äôd be this photo of you sticking your tongue out. I don‚Äôt know if you were teasing me through the lens, but it sure feels like it. You make mischief look irresistible, and honestly? I‚Äôd let you win every single time.</p>
          </div>
          <div class="v-item">
            <img src="shivu3.jpg" alt="Shivu in sunlight" class="v-img" loading="lazy">
            <p class="v-text">This one feels different‚Äîlike the light itself chose you to shine on. The way the sunlight falls on your face makes you look unreal, almost like you‚Äôre glowing from the inside out. It‚Äôs the kind of picture that makes me stop and stare, because how do you look like both peace and chaos at the same time? You‚Äôre soft, radiant, and breathtaking, and I swear even the sun looks jealous. It feels like the world pauses for a second here, just to admire you. There‚Äôs something gentle in your eyes, but also something that pulls me in like gravity. I don‚Äôt know how you do it‚Äîhow you make just standing in the light feel magical. You don‚Äôt need filters, you don‚Äôt need edits‚Äîthe universe is already working overtime to make you perfect. And still, none of it compares to how I see you. In this light, in every light, you‚Äôre my favorite kind of glow.</p>
          </div>
          <div class="v-item">
            <img src="shivu4.jpg" alt="Shivu lots of sunlight" class="v-img" loading="lazy">
            <p class="v-text">This picture feels like you are the sun. The way the light wraps around you doesn‚Äôt just brighten the photo‚Äîit brightens me too. You look like warmth, like comfort, like the summer mornings I never want to end. There‚Äôs a fire in you here, a spark that makes everything else fade into the background. You look untouchable yet inviting at the same time, like I should worship you but also hold you close. The sunlight seems to bend just to highlight you, like even nature knows who the main character is. Every inch of you in this photo radiates life, laughter, and that energy I can‚Äôt get enough of. It‚Äôs crazy how a single frame can hold so much brightness. You‚Äôre not just lit by the sun‚Äîyou outshine it. And standing here, I‚Äôd happily burn just to stay in your warmth.</p>
          </div>
          <div class="v-item">
            <img src="shivu5.jpg" alt="Shivu wearing glasses" class="v-img" loading="lazy">
            <p class="v-text">There‚Äôs just something about you in glasses that makes me weak in the knees. You look smart, confident, and so effortlessly hot‚Äîlike you know exactly the effect you‚Äôre having. It‚Äôs unfair how you can pull off the studious look while still looking like trouble I‚Äôd gladly sign up for. You‚Äôre giving main character energy, the type that makes everyone else fade into the background. I‚Äôd be lying if I said I wasn‚Äôt imagining you catching me staring through those frames. There‚Äôs a sharpness in your eyes here, like you could read me better than any book. And the truth is, you already do. You in glasses is like a cheat code‚Äîbeauty with brains, elegance with attitude, sweetness with fire. Honestly, I don‚Äôt know whether I want to kiss you or ask you to tutor me. Probably both.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer>
    Made with love and a little JavaScript. ¬© Ishan
  </footer>

  <!-- Background music (preload for quicker start) -->
  <audio id="bgm" loop preload="auto">
    <source src="song.mp3" type="audio/mpeg">
    <!-- Provide fallback text for accessibility -->
    Your browser does not support the audio element.
  </audio>

  <script>
  // ===== Helper: prefers reduced motion check =====
  const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  // ===== Balloons (responsive count + aria-hidden) =====
  const headerEl = document.querySelector('header');
  const balloonColors = ['#d72638','#f0b5af','#e7b868','#fff6f5','#9b6a6c'];
  const balloonCount = innerWidth < 600 ? 7 : 14;
  for(let i=0;i<balloonCount;i++){
    const b = document.createElement('div');
    b.className = 'balloon';
    b.setAttribute('aria-hidden', 'true');
    const c = balloonColors[i % balloonColors.length];
    b.style.background = c;
    b.style.left = Math.random()*100 + '%';
    b.style.animationDuration = (8 + Math.random()*10) + 's';
    b.style.setProperty('--drift', (Math.random()*60 - 30) + 'px');
    headerEl.appendChild(b);
  }

  // ===== Typewriter letter =====
  const letter = `Shivu,\n\nHappy Birthday. I wanted to make you something small but ours. So here it is ‚Äî a tiny universe where the only job is to remind you that you matter. On the days you feel heavy, borrow my faith: you are capable, gentle, and worthy of the soft life you dream of.\n\nThank you for being you. ‚Äî Ishan`;

  const typeArea = document.getElementById('typeArea');
  const cursorEl = document.createElement('span');
  cursorEl.className = 'cursor';
  let idx = 0, typing = false, finishedTyping = false;

  function typeIt(){
    if(prefersReduced){
      // If user prefers reduced motion, show full text instantly
      typeArea.innerHTML = letter.replace(/\n/g, '<br>');
      if(!typeArea.contains(cursorEl)) typeArea.appendChild(cursorEl);
      finishedTyping = true;
      return;
    }

    if(idx >= letter.length){
      if(!typeArea.contains(cursorEl)) typeArea.appendChild(cursorEl);
      finishedTyping = true;
      return;
    }

    const ch = letter[idx] === '\n' ? '<br>' : letter[idx];
    typeArea.innerHTML += ch;
    idx++;
    const delay = 18 + Math.random()*25;
    setTimeout(typeIt, delay);
  }

  document.getElementById('revealBtn').addEventListener('click', async ()=>{
    if(typing) return;
    typing = true;
    idx = 0;
    typeArea.innerHTML = '';
    typeIt();

    // Burst confetti + attempt to play music (user gesture) if audio exists
    burstConfetti(180);
    try{
      const audio = document.getElementById('bgm');
      if(audio && audio.paused && audio.querySelector('source') && audio.querySelector('source').getAttribute('src')){
        await audio.play();
        musicBtn.textContent = 'Pause Music ‚ùö‚ùö';
        musicBtn.classList.remove('muted');
        musicBtn.setAttribute('aria-pressed', 'true');
        playing = true;
      }
    }catch(e){
      // ignore; browsers may block autoplay unless there's a user gesture (we used one) or there is no file
      console.warn('Audio playback failed or not available:', e);
    }
  });

  // ===== Stars reveal (toggle aria-pressed for assistive tech) =====
  document.querySelectorAll('.star').forEach(s=>{
    s.setAttribute('aria-pressed', 'false');
    s.addEventListener('click', ()=>{
      const revealed = s.classList.toggle('revealed');
      s.setAttribute('aria-pressed', String(revealed));
      if(revealed && !s.textContent.trim().startsWith('‚ú®')) s.textContent = '‚ú® ' + s.textContent.trim();
    })
  })

  // ===== Confetti canvas (improved) =====
  const canvas = document.getElementById('confetti');
  const ctx = canvas.getContext('2d');
  let W, H, pieces = [];
  function resize(){ W = canvas.width = innerWidth; H = canvas.height = innerHeight }
  addEventListener('resize', resize);
  resize();

  function Piece(){
    this.x = Math.random()*W;
    this.y = Math.random()*H*0.4 + H*0.1;
    this.size = 6 + Math.random()*8;
    this.spd = 1 + Math.random()*4;
    this.rot = Math.random()*6.28;
    this.col = balloonColors[Math.floor(Math.random()*balloonColors.length)];
    this.ttl = 2200 + Math.random()*2400; // time to live
    this.created = Date.now();
  }

  function burstConfetti(n = 120){
    // reduce intensity on very small screens
    const effectiveN = innerWidth < 480 ? Math.round(n * 0.45) : n;
    for(let i=0;i<effectiveN;i++) pieces.push(new Piece());
    // auto-clear after max TTL
    setTimeout(()=>{ pieces = pieces.filter(p => (Date.now() - p.created) < 6000) }, 6000);
  }

  function renderConfetti(){
    ctx.clearRect(0,0,W,H);
    const now = Date.now();
    pieces.forEach((p,i)=>{
      const life = now - p.created;
      if(life > p.ttl) return; // skip drawn, will be filtered later
      p.y += p.spd;
      p.rot += 0.04;
      p.x += Math.sin(p.rot) * 0.6;
      ctx.save();
      ctx.translate(p.x, p.y);
      ctx.rotate(p.rot);
      ctx.fillStyle = p.col;
      ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size);
      ctx.restore();
    });
    // keep animation running
    requestAnimationFrame(renderConfetti);
  }
  renderConfetti();

  document.getElementById('confettiBtn').addEventListener('click', ()=> burstConfetti(220));

  // ===== Music toggle (separate from reveal) =====
  const audio = document.getElementById('bgm');
  const musicBtn = document.getElementById('musicBtn');
  let playing = false;
  musicBtn.addEventListener('click', async ()=>{
    try{
      if(!playing){
        await audio.play();
        musicBtn.textContent = 'Pause Music ‚ùö‚ùö';
        musicBtn.classList.remove('muted');
        musicBtn.setAttribute('aria-pressed', 'true');
      } else {
        audio.pause();
        musicBtn.textContent = 'Play Music ‚ô™';
        musicBtn.classList.add('muted');
        musicBtn.setAttribute('aria-pressed', 'false');
      }
      playing = !playing;
    }catch(e){
      alert('Add a valid audio source (song.mp3) in the same folder or update the <source> path.');
    }
  });

  // ===== Image fade-in when loaded =====
  document.querySelectorAll('.v-img').forEach(img=>{
    if(img.complete){ img.classList.add('loaded'); return; }
    img.addEventListener('load', ()=> img.classList.add('loaded'));
    img.addEventListener('error', ()=> img.classList.add('loaded'));
  });

  // Accessibility: allow Enter/Space to activate stars
  document.querySelectorAll('.star').forEach(btn=>{
    btn.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); btn.click(); }
    });
  });

  // Small UX: keep keyboard focus visible for accessibility
  document.addEventListener('keydown', (e)=>{
    if(e.key === 'Tab') document.body.classList.add('show-focus');
  });

  // Expose some helpers for debugging in console (optional)
  window._hb_helpers = { burstConfetti };
  </script>
</body>
</html>

